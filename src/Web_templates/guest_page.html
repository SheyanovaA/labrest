$def with (form)
<!DOCTYPE HTML>
<html>
 <head>
  <title>Labrest</title>
  <link rel="stylesheet" type="text/css" href="static/LabrestClient.css">
  <script type="text/javascript" src="/static/jquery.js"></script>
  <script type="text/javascript">
// функция постороения дерева ресурсов
   function tree() {jQuery.getJSON('/tree',
			      {},
			      function(json) {
					jQuery('#leftcol').html("");
					jQuery('#leftcol').append("<h4>Доступные ресурсы:</h4>"); 
					jQuery('#leftcol').append("<ul id=-1>");
					for (i in json.resources) {
						var res = json.resources[i]
						jQuery("ul#"+res.parentId).append("<li><ul id="+res.id+"><span><div>" + res.name + " " + res.typeName + " " + res.description);
						if (res.logined_user=="guest") {
							if (res.startTime ==-1) {
								jQuery("ul#"+res.id+" span div").append(" [_]");
							} else {
								jQuery("ul#"+res.id+" span div").append(" [x] by "+ res.username); // добавить дату и время блокировки и 
							}
						} else {
							if (res.startTime ==-1) {
								jQuery("ul#"+res.id+" span div").append("<a href=/lock/"+res.id+"> [_] </a>");
							} else {
								jQuery("ul#"+res.id+" span div").append("<a href=/unlock/"+res.id+"> [x] </a> by "+ res.username); // добавить дату и время блокировки и 
							}	
						}
					};
					json = 0;
				});
		}
    var timer = setInterval(tree,30000);

    jQuery(document).ready(function() {
				tree();
                                $$("input#login_button").click(function() {
                                        var user_name = $$("input#username").val();
					var user_auth = $$("input#authdata").val();
                                        jQuery.ajax({
						url: "/login",
                                                type: "POST",
						data: {username : user_name, authdata :user_auth},
						dataType: "",
                                                success: function(data) {
                                                tree();
						jQuery("form#loginbox").hide();
						jQuery("form#Userbox").show();
						jQuery('#Username').html(data.name);
                                                }
                                                });

					
                                        return false;
                                });
                        });
  </script>
 </head>
 <body>
 <div id="container">
  <div id="rightcol">
    <form name="loginbox" id="loginbox"  method="POST" size=auto>
      <h4> Авторизация </h4><br>
      $:form.username.render()
      $:form.authdata.render()
      <p align="right" ><input id="login_button" type="submit" value="Вход"  size = "15" /></p>

<p font-size="2" align="center">Для резервирования ресурсов необходима авторизация.</p>
    </form>
    <form name="Userbox" id="Userbox" size=auto style="display: none;">
	<div id = "Username"> </div>
	<p align="right" ><input id="exit_button" type="submit" value="Выход"  size = "15" /></p>
    </form>
  </div>
  <div id="leftcol">
  </div>
</div>
 </body>
</html>
