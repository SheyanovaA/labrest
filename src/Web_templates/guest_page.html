$def with (ress, form)
<!DOCTYPE HTML>
<html>
 <head>
  <title>Labrest</title>
  <link rel="stylesheet" type="text/css" href="static/LabrestClient.css">
  <script type="text/javascript" src="/static/jquery.js"></script>
  <script type="text/javascript">
    jQuery(document).ready(function() {
                                $$("input#login_button").click(function() {
                                        var user_name = $$("input#username").val();
					var user_auth = $$("input#authdata").val();
                                        //jQuery.ajax({
                                        //        type: "POST",
                                        //        data: {username : user_name, authdata :user_auth},
                                        //        success: function(data) {
                                        //        jQuery('#foo').html(data);
                                        //        },
                                        //        });

					
                                        return false;
                                });
                        });
  </script>
<script type="text/javascript">
  var i = 1;
  var timer = setInterval(jQuery.getJSON('/tree', {},
	function(json) {
		jQuery('#foo').html(json['id']);
	}), 
	5000)
	
</script>
 </head>
 <body>
<span id='foo'> Guest</span>
 <div id="container">
  <div id="rightcol">
    <form name="loginbox" size=auto>
      <h4> Авторизация </h4><br>
      $:form.username.render()
      $:form.authdata.render()
      <p align="right" ><input id="login_button" type="submit" value="Вход"  size = "15" /></p>

<p font-size="2" align="center">Для резервирования ресурсов необходима авторизация.</p>
    </form>
  </div>
    $code 
	c=-1
	count=0
  <div id="leftcol">

<h4>Доступные ресурсы:</h4>
	$for res in ress:               	
            $if c<res['layer']: 
		$code
		    count = count+1

		<ul>
	
	    $elif c>res['layer']:
		$code
		    count = count-1    	
		</ul>

		$if count>0: 
		    </li>

	    $else:
		</li>
	
	    $code 
		c=res['layer']
 
	    <li><span><div>
		$res['resource'].name $res['resource'].typeId $res['resource'].description
		$if res['resource'].resLockStatus.startTime == -1:
	 		[_]
		$else:
			[X]	
	 		by $res['resource'].resLockStatus.username
	    </div></span>

	$while count >0:
		$code
		    count = count-1
		</li>
		</ul>
  </div>
</div>
 </body>
</html>
